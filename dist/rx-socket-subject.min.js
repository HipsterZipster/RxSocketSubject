(function(){function m(a,l){function d(){1===++e&&(b=new t,h=new t,k=(c.i?c.i(f.o(b.map(function(a){return{type:"sub",value:a}}),h.map(function(a){return{type:"unsub",value:a}}))):f.o(b,h)).map(c.v).b(a))}var c={v:function(a){return JSON.stringify(a)},m:function(a){return JSON.parse(a.data)},i:null,g:null};l&&u(c,l);var b,h,e=0,k;return function(l,n,g){if(!g&&!c.u)throw"no response filter provided";g=g||c.u(l);return f.create(function(f){d();b.a(l);var w=(c.g?c.g(a):a).map(c.m).filter(g).b(f);return function(){h.a(n);
0===--e&&k.dispose();w.dispose()}})}}function u(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function b(a){function b(){g||(e=new q,n=d.map(function(a){return"string"===typeof a?{url:a,protocol:null}:a}).D(function(a){return r.create(function(b){var d=x(a.url,a.protocol,y.create(function(a){p=!0;for(c&&c.a(a);0<k.length;)a=k.shift(),e.a(a)}),h);return new Rx.A(d["catch"](function(a){f&&f.a(a);throw a;})["finally"](function(){p=!1}).b(b),e.b(d))})})["finally"](function(){g=!1}).I().J(),
g=!0);return n}var d=this.connections=a.connections,c=this.h=a.h,f=this.f=a.f,h=this.c=a.c;a=new q;var e=new q,k=[],p=!1;a.b(function(a){p?e.a(a):k.push(a)},function(a){e&&e.H(a)},function(){e&&e.G()});var n,g=!1,m=r.create(function(a){return b().b(a)});v.call(this,a,m)}var f=Rx.j,t=Rx.l,q=Rx.l,r=Rx.j,y=Rx.C,x=Rx.B.F,v=Rx.w;b.prototype=u(Object.create(v.prototype),{constructor:b,s:function(a){return m(this,a)}});b.create=function(a,f,d,c){a instanceof r&&(console.warn("DEPRECATION: RxSocketSubject.create() should be called with a configuration object"),
a={connections:a,h:f,f:d,c:c});return new b(a)};b.s=m;"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:"undefined"!==typeof this&&(this.RxSocketSubject=b)}).call(this);
